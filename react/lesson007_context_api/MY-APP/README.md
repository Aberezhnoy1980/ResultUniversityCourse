# Context API

* Prop drilling (проброс пропсов) — это передача пропсов через несколько промежуточных компонентов внутри дерева компонентов. Он возникает, когда данные должны быть переданы от одного компонента к другому через промежуточные компоненты, которым эти данные не нужны. Это может привести к усложнению кода, затруднению его чтения и поддержки.
* React Context позволяет родительскому компоненту делиться информацией с любым компонентом в его поддереве, независимо от его глубины.

Обратите внимание!

С выходом React 19 произошли важные изменения в синтаксисе использования провайдера (provider) из хука useContext().

До:

```jsx
<ThemeContext.Provider>
  ...
<ThemeContext.Provider>
```

Начиная с React 19:

```jsx
<ThemeContext>
  ...
<ThemeContext>
```

Если вы используете React версии 19 или выше, рекомендуется перейти на новый синтаксис. Это обеспечит лучшую совместимость с будущими версиями React, так как разработчики React планируют убрать поддержку старого синтаксиса.

Также для получения данных контекста теперь можно использовать хук use().

[Документация](https://react.dev/reference/react/use) по хуку <em style="color: #EB5757;">use()</em>.

Хук <em style="color: #EB5757;">use()</em> возвращает значение контекста для переданного контекста. Для получения контекста React ищет ближайший провайдер контекста.

```jsx
import { use } from 'react';

function ExampleComponent() {
  const theme = use(ThemeContext);
  // ...
}
```

Чтобы получить контекст в <em style="color: #EB5757">ExampleComponent</em> вам необходимо использовать контекст на одном из уровней выше:

```jsx
function App() {
  return (
    <ThemeContext value="dark">
      <ExampleComponent />
    </ThemeContext>
  );
}
```

* createContext() — это функция, которая создает Контекст. Она принимает значение Контекста по умолчанию и возвращает объект, содержащий провайдер (Provider) и потребителя (Consumer) Контекста.
* SomeContext — провайдер, который используется для установки и предоставления значения Контекста всем компонентам-потомками. Значение Контекста устанавливается в проп value. SomeContext.Provider — синтаксис потеряет свою поддержку в будущих обновлениях React
* SomeContext.Consumer — используется для чтения значения контекста (использовался до появления useContext()).
* useContext() — хук React, позволяющий читать и подписываться на Контекст из компонента. В данном примере уже используется use(
* Контекст идеально подходит для работы с глобальными данными, которые используются во всем приложении и изменяются редко. Либо вообще не изменяются, а только задаются при инициализации приложения.
* Если при использовании useContext() провайдер для переданного Контекста не будет найден в родительском дереве, значение Контекста будет равно значению по умолчанию, указанному при его создании.
* При создании Контекста обычно указывается начальное значение, которое будет означать, что инициализация приложения ещё не произошла. В большинстве случаев для этого используется null.
* Чтобы значение Контекста стало динамическим, можно в качестве значения в провайдер указать состояние.
* При изменении состояния обновится значение Контекста, и во всех компонентах, которые его считывают с помощью useContext(), запустится рендер.
* State management — это процесс управления состоянием данных приложения, обеспечивающий их хранение, обновление и синхронизацию между различными компонентами.
* Для управления состоянием часто применяется подход, основанный на действиях (action) и их отправке (dispatch()) для обновления состояния.
* Действие (action) — объект, с обязательным полем type, указывающим его тип (название действия). Также объект может содержать поле payload — дополнительные данные, которые передаются вместе с отправкой действия.
* dispatch() — функция, позволяющая отправить действие (action) и изменить состояние приложения.
* dispatch() отвечает за отправку действия, а редьюсер отвечает за обработку этого действия и создание нового состояния.
* Редьюсер — это функция, которая принимает действие (action), текущее состояние приложения и возвращает новое состояние, обновленное в соответствии с этим действием.
